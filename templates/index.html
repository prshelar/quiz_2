<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Quiz</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #ffe6f0; }
  .quiz-container { max-width: 500px; margin: auto; padding: 20px; background: #fff0f5; border-radius: 15px; }
  button { margin: 10px; padding: 10px 20px; border-radius: 10px; border: none; cursor: pointer; }
  #noBtn { position: relative; }
  input[type=text] { padding: 10px; width: 80%; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc; }
</style>
</head>
<body>
 
<div class="quiz-container">
  <h2 id="question">Hi Ajju, would you like to play this game?</h2>
  <div id="options"></div>
  <button id="startBtn">Start Quiz</button>
</div>
 
<script>
const quiz = [
  {
    q: "What was the date when we first met?",
    o: ["8th December 2023", "9th December 2023", "10th December 2022", "10th December 2023"]
  },
  {
    q: "What was the first gift I gave you?",
    o: ["Perfume", "Jacket", "Scarf", "Laddu", "None of the above"]
  },
  {
    q: "If we won the lottery tomorrow, what would be the first thing we buy together?",
    o: "text"
  },
  {
    q: "What is that one thing I canâ€™t leave the house without?",
    o: ["Jacket", "Lip balm", "Sanitizer", "Headphones"]
  },
  {
    q: "What is my absolute favorite dessert?",
    o: "text"
  },
  {
    q: "Will you be my Valentine?",
    o: ["Yes", "No"]
  }
];
 
let i = 0;
let answers = [];
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const startBtn = document.getElementById('startBtn');
 
startBtn.onclick = () => { startBtn.style.display = 'none'; showQuestion(); };
 
function showQuestion() {
  optionsEl.innerHTML = '';
  if(i >= quiz.length) {
    questionEl.innerText = "Thanks for playing! ðŸ’–";
 
    // Send all answers to server
    fetch("/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(answers)
    }).then(res => console.log("Answers saved!"));
 
    return;
  }
 
  const q = quiz[i];
  questionEl.innerText = q.q;
 
  if(q.o === "text") {
    const input = document.createElement('input');
    input.type = "text";
    input.id = "textAnswer";
    optionsEl.appendChild(input);
 
    const nextBtn = document.createElement('button');
    nextBtn.innerText = "Next";
    nextBtn.onclick = () => {
      answers.push({question: q.q, answer: input.value});
      i++; showQuestion();
    };
    optionsEl.appendChild(nextBtn);
 
  } else {
    q.o.forEach(opt => {
      const btn = document.createElement('button');
      btn.innerText = opt;
 
      if(q.q === "Will you be my Valentine?" && opt === "No") {
        btn.id = "noBtn";
        btn.onmouseover = () => {
          const x = Math.random() * 200 - 100;
          const y = Math.random() * 50 - 25;
          btn.style.transform = `translate(${x}px, ${y}px)`;
        };
      } else {
        btn.onclick = () => {
          answers.push({question: q.q, answer: opt});
          i++; showQuestion();
        };
      }
 
      optionsEl.appendChild(btn);
    });
  }
}
</script>
 
</body>
</html>
 
